\documentclass[tikz]{standalone}


\usepackage{amsmath}     
\usepackage{dsfont}		
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{amssymb}

\usepackage{latexsym}
\usepackage{euscript,makeidx,color,mathrsfs}
\usepackage{enumerate}

%%---------------------------------------------------------------
%plotting
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{
  width=.65\linewidth,
  axis background/.style={fill=black!5!white},
  grid style={densely dotted,semithick},
  compat=newest, % compatibility for old pgfplots versions
  no markers, 
}
 
\definecolor{plot_color1}{HTML}{b35806}
\definecolor{plot_color2}{HTML}{e08214}
\definecolor{plot_color3}{HTML}{fdb863}
\definecolor{plot_color4}{HTML}{fee0b6}
\definecolor{plot_color5}{HTML}{d8daeb}
\definecolor{plot_color6}{HTML}{b2abd2}
\definecolor{plot_color7}{HTML}{8073ac}
\definecolor{plot_color8}{HTML}{542788}


\pgfplotscreateplotcyclelist{MyColors}{%
    {plot_color1,line width=1.2},
    {plot_color2,line width=1.2},
    {plot_color3,line width=1.2},
	{plot_color4,line width=1.2},
    {plot_color5,line width=1.2},
    {plot_color6,line width=1.2},
	{plot_color7,line width=1.2},
    {plot_color8,line width=1.2},}
    
%\usepgfplotslibrary{colorbrewer}
%%%infos for choosing color in plots https://www.traag.net/2014/06/05/281/
%%---------------------------------------------------------------

%%--------------------------------------------------------------
%% load table formats for stability/convergence tables and energy plots
\usepackage{booktabs}

%%--------------------------------------------------------------


%%---------------------------------------------------------------
%%% Legend 
%%% Copied from https://tex.stackexchange.com/questions/101576/how-to-draw-horizontalrow-legend-without-the-surronding-rectangle
% argument #1: any options
\newenvironment{customlegend}[1][]{%
    \begingroup
    % inits/clears the lists (which might be populated from previous
    % axes):
    \csname pgfplots@init@cleared@structures\endcsname
    \pgfplotsset{#1}%
}{%
    % draws the legend:
    \csname pgfplots@createlegend\endcsname
    \endgroup
}%

% makes \addlegendimage available (typically only available within an
% axis environment):
\def\addlegendimage{\csname pgfplots@addlegendimage\endcsname}




\begin{document}


\begin{tikzpicture}
    \begin{customlegend}[legend entries={
	{$M = 2^2$},
	{$M = 2^3$},
	{$M = 2^4$},
	{$M = 2^5$},
	{$M = 2^6$},
	{$M = 2^7$},
	{$M = 2^8$},
	{$M = 2^9$},
	}]
    \addlegendimage{plot_color1,line width=1.2}
    \addlegendimage{plot_color2,line width=1.2}
    \addlegendimage{plot_color3,line width=1.2}
    \addlegendimage{plot_color4,line width=1.2}
    \addlegendimage{plot_color5,line width=1.2}
    \addlegendimage{plot_color6,line width=1.2}
    \addlegendimage{plot_color7,line width=1.2}
    \addlegendimage{plot_color8,line width=1.2}
    \end{customlegend}
\end{tikzpicture}


\end{document}
